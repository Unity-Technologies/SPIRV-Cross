name: "Win - Build SPIRV-Cross"
agent:
    type: Unity::VM
    image: desktop/desktop-vs2019:v0.1.0-542248
    flavor: b1.medium

interpreter: powershell
commands:
        - |
            cd ..
            cmake -HSPIRV-Cross -BSPIRV-Cross/_builds -DSPIRV_CROSS_STATIC=ON -DSPIRV_CROSS_SHARED=ON
            cd SPIRV-Cross
            cmake --build _builds --config Release
        - |
            md -force .\spirv-cross\win
            Copy-Item "_builds/Release/spirv-cross-c-shared.dll" .\spirv-cross\win
            Copy-Item "_builds/Release/spirv-cross-c-shared.lib" .\spirv-cross\win
artifacts:
    builds:
      paths:
        - "spirv-cross/**"
